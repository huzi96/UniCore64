From f66075e51be302f59233887fa3599c28cefc3938 Mon Sep 17 00:00:00 2001
From: Guan Xuetao <gxt@mprc.pku.edu.cn>
Date: Mon, 19 Sep 2011 16:32:34 +0800
Subject: [PATCH 003/641] unicore64: using generic-y to automatically generate
 one-line headers

Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn>
---
 arch/unicore64/Makefile           |   28 ----------------
 arch/unicore64/include/asm/Kbuild |   64 +++++++++++++++++++++++++++++++++++++
 2 files changed, 64 insertions(+), 28 deletions(-)

diff --git a/arch/unicore64/Makefile b/arch/unicore64/Makefile
index 0fa3333..0f7cf4a 100644
--- a/arch/unicore64/Makefile
+++ b/arch/unicore64/Makefile
@@ -34,34 +34,6 @@ KBUILD_CFLAGS		+= -msoft-float
 
 #libs-y			+= arch/unicore64/lib/
 
-ASM_GENERIC_HEADERS	:= auxvec.h
-ASM_GENERIC_HEADERS	+= bug.h bugs.h
-ASM_GENERIC_HEADERS	+= cache.h cacheflush.h checksum.h
-ASM_GENERIC_HEADERS	+= cmpxchg.h cmpxchg-local.h
-ASM_GENERIC_HEADERS	+= cputime.h current.h
-ASM_GENERIC_HEADERS	+= delay.h device.h div64.h dma.h
-ASM_GENERIC_HEADERS	+= emergency-restart.h errno.h
-ASM_GENERIC_HEADERS	+= fcntl.h ftrace.h futex.h hardirq.h hw_irq.h
-ASM_GENERIC_HEADERS	+= io.h ioctl.h ioctls.h ipcbuf.h
-ASM_GENERIC_HEADERS	+= irq.h irq_regs.h irqflags.h
-ASM_GENERIC_HEADERS	+= kdebug.h kmap_types.h linkage.h local.h
-ASM_GENERIC_HEADERS	+= mman.h module.h msgbuf.h mutex.h
-ASM_GENERIC_HEADERS	+= param.h percpu.h poll.h posix_types.h resource.h
-ASM_GENERIC_HEADERS	+= scatterlist.h sections.h sembuf.h setup.h
-ASM_GENERIC_HEADERS	+= shmbuf.h shmparam.h
-ASM_GENERIC_HEADERS	+= siginfo.h signal.h socket.h sockios.h
-ASM_GENERIC_HEADERS	+= stat.h statfs.h string.h swab.h system.h
-ASM_GENERIC_HEADERS	+= termbits.h termios.h tlb.h topology.h types.h
-ASM_GENERIC_HEADERS	+= uaccess.h unaligned.h
-
-archprepare:
-	$(Q)$(foreach a, $(ASM_GENERIC_HEADERS),	\
-		echo '#include <asm-generic/$a>'	\
-			> $(srctree)/arch/unicore64/include/asm/$a; )
-
-CLEAN_FILES		+= $(foreach a, $(ASM_GENERIC_HEADERS),		\
-			$(srctree)/arch/unicore64/include/asm/$a )
-
 all:	vmlinux
 
 define archhelp
diff --git a/arch/unicore64/include/asm/Kbuild b/arch/unicore64/include/asm/Kbuild
index c68e168..c03e36e 100644
--- a/arch/unicore64/include/asm/Kbuild
+++ b/arch/unicore64/include/asm/Kbuild
@@ -1 +1,65 @@
 include include/asm-generic/Kbuild.asm
+
+generic-y += auxvec.h
+generic-y += bug.h
+generic-y += bugs.h
+generic-y += cache.h
+generic-y += cacheflush.h
+generic-y += checksum.h
+generic-y += cmpxchg.h
+generic-y += cmpxchg-local.h
+generic-y += cputime.h
+generic-y += current.h
+generic-y += delay.h
+generic-y += device.h
+generic-y += div64.h
+generic-y += dma.h
+generic-y += emergency-restart.h
+generic-y += errno.h
+generic-y += fcntl.h
+generic-y += ftrace.h
+generic-y += futex.h
+generic-y += hardirq.h
+generic-y += hw_irq.h
+generic-y += io.h
+generic-y += ioctl.h
+generic-y += ioctls.h
+generic-y += ipcbuf.h
+generic-y += irq.h
+generic-y += irq_regs.h
+generic-y += irqflags.h
+generic-y += kdebug.h
+generic-y += kmap_types.h
+generic-y += linkage.h
+generic-y += local.h
+generic-y += mman.h
+generic-y += module.h
+generic-y += msgbuf.h
+generic-y += mutex.h
+generic-y += param.h
+generic-y += percpu.h
+generic-y += poll.h
+generic-y += posix_types.h
+generic-y += resource.h
+generic-y += scatterlist.h
+generic-y += sections.h
+generic-y += sembuf.h
+generic-y += setup.h
+generic-y += shmbuf.h
+generic-y += shmparam.h
+generic-y += siginfo.h
+generic-y += signal.h
+generic-y += socket.h
+generic-y += sockios.h
+generic-y += stat.h
+generic-y += statfs.h
+generic-y += string.h
+generic-y += swab.h
+generic-y += system.h
+generic-y += termbits.h
+generic-y += termios.h
+generic-y += tlb.h
+generic-y += topology.h
+generic-y += types.h
+generic-y += uaccess.h
+generic-y += unaligned.h
-- 
1.7.9.5

