From 6002361b34b45495ce63706a8ec35acbd2387b76 Mon Sep 17 00:00:00 2001
From: Guan Xuetao <gxt@mprc.pku.edu.cn>
Date: Mon, 31 Oct 2011 16:11:52 +0800
Subject: [PATCH 049/641] UniCore64: move tlb.c from arch/unicore64/kernel to
 arch/unicore64/mm

Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn>
---
 arch/unicore64/kernel/Makefile |    2 +-
 arch/unicore64/kernel/tlb.c    |   49 ----------------------------------------
 arch/unicore64/mm/Makefile     |    2 +-
 arch/unicore64/mm/tlb.c        |   49 ++++++++++++++++++++++++++++++++++++++++
 4 files changed, 51 insertions(+), 51 deletions(-)
 delete mode 100644 arch/unicore64/kernel/tlb.c
 create mode 100644 arch/unicore64/mm/tlb.c

diff --git a/arch/unicore64/kernel/Makefile b/arch/unicore64/kernel/Makefile
index 5e50d9c..da7ca0c 100644
--- a/arch/unicore64/kernel/Makefile
+++ b/arch/unicore64/kernel/Makefile
@@ -1,3 +1,3 @@
-obj-y			:= tlb.o ptrace.o setup.o init_task.o process.o
+obj-y			:= ptrace.o setup.o init_task.o process.o
 head-y			:= head.o
 extra-y			:= $(head-y) vmlinux.lds
diff --git a/arch/unicore64/kernel/tlb.c b/arch/unicore64/kernel/tlb.c
deleted file mode 100644
index 5c10112..0000000
--- a/arch/unicore64/kernel/tlb.c
+++ /dev/null
@@ -1,49 +0,0 @@
-#include <linux/mm.h>
-#include <linux/kernel.h>
-#include <asm/tlbflush.h>
-
-/**
- * flush_tlb_mm() -
- * @mm
- */
-void flush_tlb_mm(struct mm_struct *mm)
-{
-	/* FIXME */
-	BUG();
-}
-
-/**
- * flush_tlb_page() -
- * @vma:
- * @va:
- */
-void flush_tlb_page(struct vm_area_struct *vma, unsigned long va)
-{
-	/* FIXME */
-	BUG();
-}
-
-
-/**
- * flush_tlb_range() -
- * @vma:
- * @start:
- * @end:
- */
-void flush_tlb_range(struct vm_area_struct *vma,
-		     unsigned long start, unsigned long end)
-{
-	/* FIXME */
-	BUG();
-}
-
-/**
- * flush_tlb_kernl_range() -
- * @start:
- * @end:
- */
-void flush_tlb_kernel_range(unsigned long start, unsigned long end)
-{
-	/* FIXME */
-	BUG();
-}
diff --git a/arch/unicore64/mm/Makefile b/arch/unicore64/mm/Makefile
index 57208e2..3158b6a 100644
--- a/arch/unicore64/mm/Makefile
+++ b/arch/unicore64/mm/Makefile
@@ -1,2 +1,2 @@
-obj-y				:= mmu.o pgtable.o ioremap.o init.o
+obj-y				:= mmu.o pgtable.o ioremap.o init.o tlb.o
 obj-$(CONFIG_SWIOTLB)		+= dma-swiotlb.o
diff --git a/arch/unicore64/mm/tlb.c b/arch/unicore64/mm/tlb.c
new file mode 100644
index 0000000..5c10112
--- /dev/null
+++ b/arch/unicore64/mm/tlb.c
@@ -0,0 +1,49 @@
+#include <linux/mm.h>
+#include <linux/kernel.h>
+#include <asm/tlbflush.h>
+
+/**
+ * flush_tlb_mm() -
+ * @mm
+ */
+void flush_tlb_mm(struct mm_struct *mm)
+{
+	/* FIXME */
+	BUG();
+}
+
+/**
+ * flush_tlb_page() -
+ * @vma:
+ * @va:
+ */
+void flush_tlb_page(struct vm_area_struct *vma, unsigned long va)
+{
+	/* FIXME */
+	BUG();
+}
+
+
+/**
+ * flush_tlb_range() -
+ * @vma:
+ * @start:
+ * @end:
+ */
+void flush_tlb_range(struct vm_area_struct *vma,
+		     unsigned long start, unsigned long end)
+{
+	/* FIXME */
+	BUG();
+}
+
+/**
+ * flush_tlb_kernl_range() -
+ * @start:
+ * @end:
+ */
+void flush_tlb_kernel_range(unsigned long start, unsigned long end)
+{
+	/* FIXME */
+	BUG();
+}
-- 
1.7.9.5

