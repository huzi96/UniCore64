From cae831aa699b80c127df9fb205bbb41cfeba0d2e Mon Sep 17 00:00:00 2001
From: LiangRongrong <Liangrongrong@mprc.pku.edu.cn>
Date: Fri, 2 Dec 2011 18:01:39 +0800
Subject: [PATCH 116/641] UniCore64: Add arch asm-mmuops.h

Signed-off-by: Liang Rongrong <liangrongrong@mprc.pku.edu.cn>
---
 arch/unicore64/include/arch/asm-mmuops.h |   38 ++++++++++++++++++++++++++++++
 1 file changed, 38 insertions(+)
 create mode 100644 arch/unicore64/include/arch/asm-mmuops.h

diff --git a/arch/unicore64/include/arch/asm-mmuops.h b/arch/unicore64/include/arch/asm-mmuops.h
new file mode 100644
index 0000000..8dc3253
--- /dev/null
+++ b/arch/unicore64/include/arch/asm-mmuops.h
@@ -0,0 +1,38 @@
+#ifndef __UNICORE64_ARCH_ASM_MMUOPS_H__
+#define __UNICORE64_ARCH_ASM_MMUOPS_H__
+
+#include <arch/asm-common.h>
+
+/**
+ * uc64_invalidate_dcache - invalidate entire L1 dcache
+ */
+__ASMMACRO_WRAP(.macro uc64_invalidate_dcache, rt;
+			dmovl	&rt, #0;
+			movc	cp0.c6, &rt, #8;
+		.endm)
+
+/**
+ * uc64_flush_dcache - flush entire L1 dcache
+ */
+__ASMMACRO_WRAP(.macro uc64_flush_dcache, rt;
+			dmovl	&rt, #0;
+			movc	cp0.c6, &rt, #12;
+		.endm)
+
+/**
+ * uc64_invalidate_icache - invalidate entire icache
+ */
+__ASMMACRO_WRAP(.macro uc64_invalidate_icache, rt;
+			dmovl	&rt, #0;
+			movc	cp0.c7, &rt, #0;
+		.endm)
+
+/**
+ * uc64_invalidate_tlb - invalidate I&D tlb
+ */
+__ASMMACRO_WRAP(.macro uc64_invalidate_tlb, rt;
+			dmovl	&rt, #0;
+			movc	cp0.c5, &rt, #24;
+		.endm)
+
+#endif /* __UNICORE64_ARCH_ASM_MMUOPS_H__ */
-- 
1.7.9.5

