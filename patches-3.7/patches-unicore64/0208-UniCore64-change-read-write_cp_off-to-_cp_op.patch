From 6d20b8c8c888e037597c780d8aa86bf7f86fa149 Mon Sep 17 00:00:00 2001
From: Guan Xuetao <gxt@mprc.pku.edu.cn>
Date: Sat, 14 Jan 2012 13:20:21 +0800
Subject: [PATCH 208/641] UniCore64: change read/write_cp_off to *_cp_op

Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn>
---
 arch/unicore64/include/arch/hwdef-copro.h |   16 ++++++++--------
 arch/unicore64/kernel/cpu-uc64.c          |    4 ++--
 2 files changed, 10 insertions(+), 10 deletions(-)

diff --git a/arch/unicore64/include/arch/hwdef-copro.h b/arch/unicore64/include/arch/hwdef-copro.h
index 0640eec..b31dc7b 100644
--- a/arch/unicore64/include/arch/hwdef-copro.h
+++ b/arch/unicore64/include/arch/hwdef-copro.h
@@ -8,23 +8,23 @@
  */
 #include <arch/bitfield.h>
 
-#define read_cp_off(reg_name, reg_offset)				\
+#define read_cp_op(reg, op_no)						\
 	({								\
 		unsigned long __val;					\
-		asm("movc	%0, " __stringify(reg_name)		\
-				", #" __stringify(reg_offset)		\
+		asm("movc	%0, " __stringify(reg)			\
+				", #" __stringify(op_no)		\
 		    : "=r" (__val));					\
 		__val;							\
 	})
 
-#define write_cp_off(reg_value, reg_name, reg_offset)			\
+#define write_cp_op(reg_value, reg, op_no)				\
 	({								\
-		asm("movc	" __stringify(reg_name)			\
-			", %0, #" __stringify(reg_offset)		\
+		asm("movc	" __stringify(reg)			\
+			", %0, #" __stringify(op_no)			\
 		    : : "r" (reg_value));				\
 	})
 
-#define read_cp(rn)		read_cp_off(rn, 0)
-#define write_cp(v, rn)		write_cp_off(v, rn, 0)
+#define read_cp(rn)		read_cp_op(rn, 0)
+#define write_cp(v, rn)		write_cp_op(v, rn, 0)
 
 #endif /* __UNICORE64_ARCH_HWDEF_COPRO_H__ */
diff --git a/arch/unicore64/kernel/cpu-uc64.c b/arch/unicore64/kernel/cpu-uc64.c
index b7cadec..064d432 100644
--- a/arch/unicore64/kernel/cpu-uc64.c
+++ b/arch/unicore64/kernel/cpu-uc64.c
@@ -158,7 +158,7 @@ void __init setup_arch_cpuinfo(void)
 	unsigned long uc64_cpuid;
 	unsigned long uc64_cache;
 
-	uc64_cpuid = read_cp_off(CP0_CPUID, 0);
+	uc64_cpuid = read_cp_op(CP0_CPUID, 0);
 
 	BUG_ON((uc64_cpuid & CP0_CPUID_PARTNO_MASK) !=
 			CP0_CPUID_PARTNO_PKUNITY);
@@ -172,7 +172,7 @@ void __init setup_arch_cpuinfo(void)
 		((uc64_cpuid & CP0_CPUID_LAYOUT_MASK) >> CP0_CPUID_LAYOUT_POS));
 
 	/* CACHE information */
-	uc64_cache = read_cp_off(CP0_CPUID, 1);
+	uc64_cache = read_cp_op(CP0_CPUID, 1);
 
 	BUG_ON(!(uc64_cache & CP0_CPUID_CACHE_SEPERATE));
 
-- 
1.7.9.5

