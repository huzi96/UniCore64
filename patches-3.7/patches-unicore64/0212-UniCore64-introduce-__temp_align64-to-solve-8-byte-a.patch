From 29379fb21288e4f10afb0e70b6d8074114e4cd47 Mon Sep 17 00:00:00 2001
From: Guan Xuetao <gxt@mprc.pku.edu.cn>
Date: Mon, 16 Jan 2012 08:45:18 +0800
Subject: [PATCH 212/641] UniCore64: introduce __temp_align64 to solve 8-byte
 alignement problem temperarily

Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn>
---
 arch/unicore64/include/arch/temp.h |    8 ++++++++
 arch/unicore64/kernel/head.S       |    2 ++
 2 files changed, 10 insertions(+)
 create mode 100644 arch/unicore64/include/arch/temp.h

diff --git a/arch/unicore64/include/arch/temp.h b/arch/unicore64/include/arch/temp.h
new file mode 100644
index 0000000..309de8d
--- /dev/null
+++ b/arch/unicore64/include/arch/temp.h
@@ -0,0 +1,8 @@
+#ifndef __UNICORE64_ARCH_TEMP_H__
+#define __UNICORE64_ARCH_TEMP_H__
+
+#ifdef __ASSEMBLY__
+#define __temp_align64	.align 3
+#endif /* __ASSEMBLY__ */
+
+#endif /* __UNICORE64_ARCH_TEMP_H__ */
diff --git a/arch/unicore64/kernel/head.S b/arch/unicore64/kernel/head.S
index 0eb914e..7050430 100644
--- a/arch/unicore64/kernel/head.S
+++ b/arch/unicore64/kernel/head.S
@@ -14,6 +14,7 @@
 #include <arch/hwdef-copro.h>
 #include <arch/asm-mmuops.h>
 #include <arch/head-macros.S>
+#include <arch/temp.h>
 
 /**
  * DOC: swapper_pg_dir
@@ -55,6 +56,7 @@ ENTRY(stext)
 	b	start_kernel
 ENDPROC(stext)
 
+	__temp_align64
 __priv_sp:
 	.dword	init_thread_union + (THREAD_SIZE - 8)
 
-- 
1.7.9.5

