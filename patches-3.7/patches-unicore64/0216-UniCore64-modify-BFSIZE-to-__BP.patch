From ba83a3a408411288f358d8bb6869291afc13f36b Mon Sep 17 00:00:00 2001
From: Guan Xuetao <gxt@mprc.pku.edu.cn>
Date: Mon, 16 Jan 2012 09:05:48 +0800
Subject: [PATCH 216/641] UniCore64: modify BFSIZE to __BP

Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn>
---
 arch/unicore64/include/arch/bitfield.h      |    4 ++--
 arch/unicore64/include/arch/hwdef-pgtable.h |    8 ++++----
 arch/unicore64/include/asm/pgtable.h        |    6 +++---
 3 files changed, 9 insertions(+), 9 deletions(-)

diff --git a/arch/unicore64/include/arch/bitfield.h b/arch/unicore64/include/arch/bitfield.h
index f84ab8c..9fcf604 100644
--- a/arch/unicore64/include/arch/bitfield.h
+++ b/arch/unicore64/include/arch/bitfield.h
@@ -8,8 +8,8 @@
 
 #include <linux/const.h>
 
-#define BFSIZE(vbits)			(_AC(1, UL) << (vbits))
-#define __BM(vmask, vshift)		(((BFSIZE(vmask)) - 1) << (vshift))
+#define __BP(vbits)			(_AC(1, UL) << (vbits))
+#define __BM(vmask, vshift)		(((__BP(vmask)) - 1) << (vshift))
 #define __BS(vmask, vshift)	(~__BM(vmask, vshift))
 
 #define __BF(val, vmask, vshift)		\
diff --git a/arch/unicore64/include/arch/hwdef-pgtable.h b/arch/unicore64/include/arch/hwdef-pgtable.h
index 2e809af..3cd2244 100644
--- a/arch/unicore64/include/arch/hwdef-pgtable.h
+++ b/arch/unicore64/include/arch/hwdef-pgtable.h
@@ -15,21 +15,21 @@
 #define UC64_PGTBL_ENTRY_BITS	(3)
 
 #define UC64_PAGE_BITS		(12)
-#define UC64_PAGE_SIZE		BFSIZE(UC64_PAGE_BITS)
+#define UC64_PAGE_SIZE		__BP(UC64_PAGE_BITS)
 #define UC64_PAGE_MASK		__BM(UC64_PAGE_BITS, 0)
 
 #define UC64_PTE_BITS		(UC64_PAGE_BITS - UC64_PGTBL_ENTRY_BITS)
-#define UC64_PTE_SIZE		BFSIZE(UC64_PTE_BITS)
+#define UC64_PTE_SIZE		__BP(UC64_PTE_BITS)
 #define UC64_PTE_MASK		__BM(UC64_PTE_BITS, UC64_PAGE_BITS)
 
 #define UC64_PMD_BITS		(UC64_PAGE_BITS - UC64_PGTBL_ENTRY_BITS)
 #define UC64_PMD_SHIFT		(UC64_PAGE_BITS + UC64_PTE_BITS)
-#define UC64_PMD_SIZE		BFSIZE(UC64_PMD_SHIFT)
+#define UC64_PMD_SIZE		__BP(UC64_PMD_SHIFT)
 #define UC64_PMD_MASK		__BM(UC64_PMD_BITS, UC64_PMD_SHIFT)
 
 #define UC64_PGD_BITS		(UC64_PAGE_BITS - UC64_PGTBL_ENTRY_BITS)
 #define UC64_PGD_SHIFT		(UC64_PMD_SHIFT + UC64_PGD_BITS)
-#define UC64_PGD_SIZE		BFSIZE(UC64_PGD_SHIFT)
+#define UC64_PGD_SIZE		__BP(UC64_PGD_SHIFT)
 #define UC64_PGD_MASK		__BM(UC64_PGD_BITS, UC64_PGD_SHIFT)
 
 /**
diff --git a/arch/unicore64/include/asm/pgtable.h b/arch/unicore64/include/asm/pgtable.h
index 84187e7..7d4e360 100644
--- a/arch/unicore64/include/asm/pgtable.h
+++ b/arch/unicore64/include/asm/pgtable.h
@@ -22,9 +22,9 @@
 #define PMD_SIZE		UC64_PMD_SIZE
 #define PMD_MASK		__BS(PMD_SHIFT, 0)
 
-#define PTRS_PER_PGD		BFSIZE(UC64_PGD_BITS)
-#define PTRS_PER_PMD		BFSIZE(UC64_PMD_BITS)
-#define PTRS_PER_PTE		BFSIZE(UC64_PTE_BITS)
+#define PTRS_PER_PGD		__BP(UC64_PGD_BITS)
+#define PTRS_PER_PMD		__BP(UC64_PMD_BITS)
+#define PTRS_PER_PTE		__BP(UC64_PTE_BITS)
 
 extern pgd_t swapper_pg_dir[PTRS_PER_PGD];
 
-- 
1.7.9.5

