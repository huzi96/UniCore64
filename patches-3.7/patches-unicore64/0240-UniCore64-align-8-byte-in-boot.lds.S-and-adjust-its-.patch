From f6394ddec1a0c8090a14ea8bc2f1526122cbb0a0 Mon Sep 17 00:00:00 2001
From: Guan Xuetao <gxt@mprc.pku.edu.cn>
Date: Tue, 17 Jan 2012 23:28:10 +0800
Subject: [PATCH 240/641] UniCore64: align 8 byte in boot.lds.S and adjust its
 content

Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn>
---
 arch/unicore64/boot/boot.lds.S |   25 ++++++++++++-------------
 1 file changed, 12 insertions(+), 13 deletions(-)

diff --git a/arch/unicore64/boot/boot.lds.S b/arch/unicore64/boot/boot.lds.S
index 22f171e..52bd399 100644
--- a/arch/unicore64/boot/boot.lds.S
+++ b/arch/unicore64/boot/boot.lds.S
@@ -4,17 +4,6 @@ OUTPUT_ARCH(unicore64)
 ENTRY(_start)
 SECTIONS
 {
-	/DISCARD/ : {
-		/*
-		 * Discard any r/w data -
-		 * This produces a link error if we have any, which is
-		 * required for PIC decompression.  Local data generates
-		 * GOTOFF relocations, which prevents it being relocated
-		 * independently of the text/got segments.
-		 */
-		*(.data)
-	}
-
 	. = UC64_PM_ZIMAGE_START;
 
 	.text : {
@@ -22,12 +11,22 @@ SECTIONS
 		*(.text)
 		*(.rodata)
 		*(.rodata.*)
-
-		. = ALIGN(4);
 	}
 
+	. = ALIGN(8);
+
 	__bss_start = .;
 	.bss : { *(.bss) }
 	_end = .;
 
+	/DISCARD/ : {
+		/*
+		 * Discard any r/w data -
+		 * This produces a link error if we have any, which is
+		 * required for PIC decompression.  Local data generates
+		 * GOTOFF relocations, which prevents it being relocated
+		 * independently of the text/got segments.
+		 */
+		*(.data)
+	}
 }
-- 
1.7.9.5

