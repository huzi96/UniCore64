From 28fdf1fa4c66b530043dc1606ec879b544cc8b6a Mon Sep 17 00:00:00 2001
From: Guan Xuetao <gxt@mprc.pku.edu.cn>
Date: Wed, 18 Jan 2012 10:33:43 +0800
Subject: [PATCH 246/641] UniCore64 epip4d: trick to clear bss

Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn>
---
 arch/unicore64/boot/boot.lds.S |    6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/arch/unicore64/boot/boot.lds.S b/arch/unicore64/boot/boot.lds.S
index 52bd399..8679e2a 100644
--- a/arch/unicore64/boot/boot.lds.S
+++ b/arch/unicore64/boot/boot.lds.S
@@ -15,9 +15,11 @@ SECTIONS
 
 	. = ALIGN(8);
 
-	__bss_start = .;
+	/* epip4d: trick to clear bss */
+	. = UC64_PM_ZIMAGE_HEAP_END;
+	__bss_start = UC64_PM_ZIMAGE_HEAP_END;
 	.bss : { *(.bss) }
-	_end = .;
+	_end = UC64_PM_ZIMAGE_HEAP_END + 0x100;
 
 	/DISCARD/ : {
 		/*
-- 
1.7.9.5

