From 5060e65b54153177f1a405b162a7c92e6a5edc28 Mon Sep 17 00:00:00 2001
From: Guan Xuetao <gxt@mprc.pku.edu.cn>
Date: Wed, 18 Jan 2012 14:59:38 +0800
Subject: [PATCH 247/641] UniCore64: replace .align with .p2align

Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn>
---
 arch/unicore64/include/arch/asm-common.h |    2 +-
 arch/unicore64/kernel/entry.S            |    2 +-
 arch/unicore64/lib/debug.S               |    1 -
 3 files changed, 2 insertions(+), 3 deletions(-)

diff --git a/arch/unicore64/include/arch/asm-common.h b/arch/unicore64/include/arch/asm-common.h
index b30f64e..6b999caf 100644
--- a/arch/unicore64/include/arch/asm-common.h
+++ b/arch/unicore64/include/arch/asm-common.h
@@ -28,7 +28,7 @@ __ASMMACRO_WRAP(.macro	uc64_pop, rt;
 
 /* epip for debug: all should be removed definitely */
 #ifdef __ASSEMBLY__
-#define __epip4d_align64	.align 3
+#define __epip4d_align64	.p2align 3
 #endif /* __ASSEMBLY__ */
 
 #endif /* __UNICORE64_ARCH_ASM_COMMON_H__ */
diff --git a/arch/unicore64/kernel/entry.S b/arch/unicore64/kernel/entry.S
index aa0197f..18377e5 100644
--- a/arch/unicore64/kernel/entry.S
+++ b/arch/unicore64/kernel/entry.S
@@ -38,7 +38,7 @@ ENTRY(__switch_to)
 	/* FIXME: */
 ENDPROC(__switch_to)
 
-	.align	L1_CACHE_SHIFT
+	.p2align	L1_CACHE_SHIFT
 ENTRY(__vectors_table)
 	call	__vec_invalid	/* 0x00: RESET */
 	call	__vec_invalid	/* 0x04: EEXTN */
diff --git a/arch/unicore64/lib/debug.S b/arch/unicore64/lib/debug.S
index c81611c2..91fa074 100644
--- a/arch/unicore64/lib/debug.S
+++ b/arch/unicore64/lib/debug.S
@@ -29,5 +29,4 @@ ENTRY(uc64_debug_puts)
 
 1004:
 	.asciz	"\nWarning: String is too long in uc64_debug_puts.\n"
-	.align 4
 ENDPROC(uc64_debug_puts)
-- 
1.7.9.5

