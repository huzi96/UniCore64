From f07fab796239b498be242d6ccf742f052ac9e2de Mon Sep 17 00:00:00 2001
From: Guan Xuetao <gxt@mprc.pku.edu.cn>
Date: Wed, 18 Jan 2012 15:58:12 +0800
Subject: [PATCH 251/641] UniCore64: short format of __push and __pop

Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn>
---
 arch/unicore64/include/arch/asm-common.h |    4 ++--
 arch/unicore64/kernel/entry.S            |   12 ++++++------
 arch/unicore64/kernel/head.S             |    4 ++--
 3 files changed, 10 insertions(+), 10 deletions(-)

diff --git a/arch/unicore64/include/arch/asm-common.h b/arch/unicore64/include/arch/asm-common.h
index 6b999caf..76ef89a 100644
--- a/arch/unicore64/include/arch/asm-common.h
+++ b/arch/unicore64/include/arch/asm-common.h
@@ -18,11 +18,11 @@
 #define __ASMMACRO_WRAP(code...)	__asm__(__stringify(code));
 #endif /* __ASSEMBLY__ */
 
-__ASMMACRO_WRAP(.macro	uc64_push, rt;
+__ASMMACRO_WRAP(.macro	__push, rt;
 			std.w	&rt, [sp-], #8;
 		.endm)
 
-__ASMMACRO_WRAP(.macro	uc64_pop, rt;
+__ASMMACRO_WRAP(.macro	__pop, rt;
 			ldd.w	&rt, [sp]+, #8;
 		.endm)
 
diff --git a/arch/unicore64/kernel/entry.S b/arch/unicore64/kernel/entry.S
index c21e919..5902ad4 100644
--- a/arch/unicore64/kernel/entry.S
+++ b/arch/unicore64/kernel/entry.S
@@ -7,27 +7,27 @@
 	/* save all gp registers */
 	.irp	n, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, \
 		16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 30
-	uc64_push	r\n
+	__push	r\n
 	.endr
 
 	/* save bsr and bfr */
 	mov	bsr, r0
-	uc64_push	r0
+	__push	r0
 	mov	bfr, r0
-	uc64_push	r0
+	__push	r0
 	.endm
 
 	.macro __priv_context_restore
 	/* restore bfr and bsr registers */
-	uc64_pop	r0
+	__pop	r0
 	mov	bfr, r0
-	uc64_pop	r0
+	__pop	r0
 	mov	bsr, r0
 
 	/* restore all registers */
 	.irp	n, 30, 28, 27, 26, 25, 24, 23, 22, 21, 20, 19, 18, 17, 16, \
 		15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0
-	uc64_pop	r\n
+	__pop	r\n
 	.endr
 	.endm
 
diff --git a/arch/unicore64/kernel/head.S b/arch/unicore64/kernel/head.S
index 1b23f56..6261b17 100644
--- a/arch/unicore64/kernel/head.S
+++ b/arch/unicore64/kernel/head.S
@@ -64,7 +64,7 @@ __priv_sp:
  * it will map the first 64MB of kernel image
  */
 ENTRY(__head_pgtable_init)
-	uc64_push	lr
+	__push	lr
 	/*
 	 * Step one: clear 4k level-one page table for pgd
 	 */
@@ -118,6 +118,6 @@ ENTRY(__head_pgtable_init)
 	dmovl	r0, #UC64_PM_PGTABLE_PGD
 	uc64_set_pgd	r0
 
-	uc64_pop	lr
+	__pop	lr
 	return
 ENDPROC(__head_pgtable_init)
-- 
1.7.9.5

