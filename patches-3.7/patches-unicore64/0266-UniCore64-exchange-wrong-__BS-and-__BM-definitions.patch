From a5c6c9abfcedde08d24198532cbdd4b6abe61931 Mon Sep 17 00:00:00 2001
From: Guan Xuetao <gxt@mprc.pku.edu.cn>
Date: Wed, 25 Jan 2012 16:51:46 +0800
Subject: [PATCH 266/641] UniCore64: exchange wrong __BS and __BM definitions

Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn>
---
 arch/unicore64/include/arch/bitfield.h          |   10 +++++-----
 arch/unicore64/include/arch/hwdef-cp0-sysctrl.h |   20 ++++++++++----------
 arch/unicore64/include/arch/hwdef-cpu.h         |    6 +++---
 arch/unicore64/include/arch/hwdef-pgtable.h     |    8 ++++----
 arch/unicore64/include/asm/page.h               |    2 +-
 arch/unicore64/include/asm/pgtable.h            |    4 ++--
 6 files changed, 25 insertions(+), 25 deletions(-)

diff --git a/arch/unicore64/include/arch/bitfield.h b/arch/unicore64/include/arch/bitfield.h
index 36677ff..b898099 100644
--- a/arch/unicore64/include/arch/bitfield.h
+++ b/arch/unicore64/include/arch/bitfield.h
@@ -10,14 +10,14 @@
 
 /*
  * __BP: power of 2 for _len
- * __BM: mask for bits of _len length from _sft bits
- * __BS: select mask for bits of _len length from _sft bits
+ * __BS: select bitpattern for bits of _len length from _sft bits
+ * __BM: mask bitpattern for bits of _len length from _sft bits
  * __BF: field value is _val, for bits of _len length from _sft bits
  */
 #define __BP(_len)		(_AC(1, UL) << (_len))
-#define __BM(_len, _sft)	(((__BP(_len)) - 1) << (_sft))
-#define __BS(_len, _sft)	(~__BM(_len, _sft))
-#define __BF(_val, _len, _sft)	(((_val) << (_sft)) & __BM(_len, _sft))
+#define __BS(_len, _sft)	(((__BP(_len)) - 1) << (_sft))
+#define __BM(_len, _sft)	(~__BS(_len, _sft))
+#define __BF(_val, _len, _sft)	(((_val) << (_sft)) & __BS(_len, _sft))
 
 /*
  * __BC: concatenate _hi and _lo to define 64-bit addresses:
diff --git a/arch/unicore64/include/arch/hwdef-cp0-sysctrl.h b/arch/unicore64/include/arch/hwdef-cp0-sysctrl.h
index d95e0ab..0f109be 100644
--- a/arch/unicore64/include/arch/hwdef-cp0-sysctrl.h
+++ b/arch/unicore64/include/arch/hwdef-cp0-sysctrl.h
@@ -80,26 +80,26 @@
  * -
  * \\\\lt:/programlisting\\\\gt:
  */
-#define CP0_CPUID_PARTNO_MASK		__BM(16, 0)
+#define CP0_CPUID_PARTNO_MASK		__BS(16, 0)
 #define CP0_CPUID_PARTNO_PKUNITY	__BF(0x863, 12, 0)
 #define CP0_CPUID_LAYOUT_POS		(16)
-#define CP0_CPUID_LAYOUT_MASK		__BM(4, CP0_CPUID_LAYOUT_POS)
+#define CP0_CPUID_LAYOUT_MASK		__BS(4, CP0_CPUID_LAYOUT_POS)
 #define CP0_CPUID_SERIES_POS		(20)
-#define CP0_CPUID_SERIES_MASK		__BM(4, CP0_CPUID_SERIES_POS)
-#define CP0_CPUID_DESIGNER_MASK		__BM(8, 24)
+#define CP0_CPUID_SERIES_MASK		__BS(4, CP0_CPUID_SERIES_POS)
+#define CP0_CPUID_DESIGNER_MASK		__BS(8, 24)
 #define CP0_CPUID_DESIGNER_MPRC		__BF(0x4D, 8, 24)
 
 /**
  * DOC: HWDEF_COPRO_H_CP0_CACHE
  * Following cache inforamtion macros in CP0 are defined.
  */
-#define CP0_CPUID_ICACHE_LINE_MASK		__BM(2, 0)
+#define CP0_CPUID_ICACHE_LINE_MASK		__BS(2, 0)
 #define CP0_CPUID_ICACHE_LINE_8BYTE		__BF(0, 2, 0)
 #define CP0_CPUID_ICACHE_LINE_16BYTE		__BF(1, 2, 0)
 #define CP0_CPUID_ICACHE_LINE_32BYTE		__BF(2, 2, 0)
 #define CP0_CPUID_ICACHE_LINE_64BYTE		__BF(3, 2, 0)
 
-#define CP0_CPUID_ICACHE_ASSOC_MASK		__BM(3, 3)
+#define CP0_CPUID_ICACHE_ASSOC_MASK		__BS(3, 3)
 #define CP0_CPUID_ICACHE_ASSOC_DMAP		__BF(0, 3, 3)
 #define CP0_CPUID_ICACHE_ASSOC_2WAY		__BF(1, 3, 3)
 #define CP0_CPUID_ICACHE_ASSOC_4WAY		__BF(2, 3, 3)
@@ -109,7 +109,7 @@
 #define CP0_CPUID_ICACHE_ASSOC_64WAY		__BF(6, 3, 3)
 #define CP0_CPUID_ICACHE_ASSOC_128WAY		__BF(7, 3, 3)
 
-#define CP0_CPUID_ICACHE_SIZE_MASK		__BM(3, 6)
+#define CP0_CPUID_ICACHE_SIZE_MASK		__BS(3, 6)
 #define CP0_CPUID_ICACHE_SIZE_512B		__BF(0, 3, 6)
 #define CP0_CPUID_ICACHE_SIZE_1KB		__BF(1, 3, 6)
 #define CP0_CPUID_ICACHE_SIZE_2KB		__BF(2, 3, 6)
@@ -119,13 +119,13 @@
 #define CP0_CPUID_ICACHE_SIZE_32KB		__BF(6, 3, 6)
 #define CP0_CPUID_ICACHE_SIZE_64KB		__BF(7, 3, 6)
 
-#define CP0_CPUID_DCACHE_LINE_MASK		__BM(2, 12)
+#define CP0_CPUID_DCACHE_LINE_MASK		__BS(2, 12)
 #define CP0_CPUID_DCACHE_LINE_8BYTE		__BF(0, 2, 12)
 #define CP0_CPUID_DCACHE_LINE_16BYTE		__BF(1, 2, 12)
 #define CP0_CPUID_DCACHE_LINE_32BYTE		__BF(2, 2, 12)
 #define CP0_CPUID_DCACHE_LINE_64BYTE		__BF(3, 2, 12)
 
-#define CP0_CPUID_DCACHE_ASSOC_MASK		__BM(3, 15)
+#define CP0_CPUID_DCACHE_ASSOC_MASK		__BS(3, 15)
 #define CP0_CPUID_DCACHE_ASSOC_DMAP		__BF(0, 3, 15)
 #define CP0_CPUID_DCACHE_ASSOC_2WAY		__BF(1, 3, 15)
 #define CP0_CPUID_DCACHE_ASSOC_4WAY		__BF(2, 3, 15)
@@ -135,7 +135,7 @@
 #define CP0_CPUID_DCACHE_ASSOC_64WAY		__BF(6, 3, 15)
 #define CP0_CPUID_DCACHE_ASSOC_128WAY		__BF(7, 3, 15)
 
-#define CP0_CPUID_DCACHE_SIZE_MASK		__BM(3, 18)
+#define CP0_CPUID_DCACHE_SIZE_MASK		__BS(3, 18)
 #define CP0_CPUID_DCACHE_SIZE_512B		__BF(0, 3, 18)
 #define CP0_CPUID_DCACHE_SIZE_1KB		__BF(1, 3, 18)
 #define CP0_CPUID_DCACHE_SIZE_2KB		__BF(2, 3, 18)
diff --git a/arch/unicore64/include/arch/hwdef-cpu.h b/arch/unicore64/include/arch/hwdef-cpu.h
index 8a74bf6..b6f7075 100644
--- a/arch/unicore64/include/arch/hwdef-cpu.h
+++ b/arch/unicore64/include/arch/hwdef-cpu.h
@@ -32,7 +32,7 @@
  * -
  * \\\\lt:/programlisting\\\\gt:
  */
-#define ASR_MODE_MASK		__BM(3, 0)
+#define ASR_MODE_MASK		__BS(3, 0)
 #define ASR_MODE_USER		__BF(1, 1, 0)
 #define ASR_MODE_PRIV		__BF(1, 1, 1)
 #define ASR_MODE_DEBUG		__BF(1, 1, 2)
@@ -40,7 +40,7 @@
 #define ASR_T_BIT		__BF(1, 1, 3)
 #define ASR_D_BIT		__BF(1, 1, 4)
 
-#define ASR_INTR_MASK		__BM(6, 5)
+#define ASR_INTR_MASK		__BS(6, 5)
 #define ASR_INTR_SMP		__BF(1, 1, 5)
 #define ASR_INTR_LSU		__BF(1, 1, 6)
 #define ASR_INTR_ITM		__BF(1, 1, 7)
@@ -62,7 +62,7 @@
  * -
  * \\\\lt:/programlisting\\\\gt:
  */
-#define AFR_MASK		__BM(4, 0)
+#define AFR_MASK		__BS(4, 0)
 #define AFR_V_BIT		__BF(1, 1, 0)
 #define AFR_C_BIT		__BF(1, 1, 1)
 #define AFR_Z_BIT		__BF(1, 1, 2)
diff --git a/arch/unicore64/include/arch/hwdef-pgtable.h b/arch/unicore64/include/arch/hwdef-pgtable.h
index 3cd2244..509ab97 100644
--- a/arch/unicore64/include/arch/hwdef-pgtable.h
+++ b/arch/unicore64/include/arch/hwdef-pgtable.h
@@ -77,9 +77,9 @@
 #define UC64_PMD_EXEC		__BF(1, 1, 5)
 #define UC64_PMD_WRITE		__BF(1, 1, 6)
 #define UC64_PMD_READ		__BF(1, 1, 7)
-#define UC64_PMD_RWX		__BM(3, 5)
+#define UC64_PMD_RWX		__BS(3, 5)
 #define UC64_PMD_GLOBAL		__BF(1, 1, 8)
-#define UC64_PMD_TYPE_MASK	__BM(2, 9)
+#define UC64_PMD_TYPE_MASK	__BS(2, 9)
 #define UC64_PMD_TYPE_IO	__BF(0, 2, 9)
 #define UC64_PMD_TYPE_NOCACHE	__BF(1, 2, 9)
 #define UC64_PMD_TYPE_CACHE	__BF(2, 2, 9)
@@ -115,9 +115,9 @@
 #define UC64_PTE_EXEC		__BF(1, 1, 5)
 #define UC64_PTE_WRITE		__BF(1, 1, 6)
 #define UC64_PTE_READ		__BF(1, 1, 7)
-#define UC64_PTE_RWX		__BM(3, 5)
+#define UC64_PTE_RWX		__BS(3, 5)
 #define UC64_PTE_GLOBAL		__BF(1, 1, 8)
-#define UC64_PTE_TYPE_MASK	__BM(2, 9)
+#define UC64_PTE_TYPE_MASK	__BS(2, 9)
 #define UC64_PTE_TYPE_IO	__BF(0, 2, 9)
 #define UC64_PTE_TYPE_NOCACHE	__BF(1, 2, 9)
 #define UC64_PTE_TYPE_CACHE	__BF(2, 2, 9)
diff --git a/arch/unicore64/include/asm/page.h b/arch/unicore64/include/asm/page.h
index a74497a..f83c699 100644
--- a/arch/unicore64/include/asm/page.h
+++ b/arch/unicore64/include/asm/page.h
@@ -10,7 +10,7 @@
 /* PAGE_SHIFT determines the page size */
 #define PAGE_SHIFT		UC64_PAGE_BITS
 #define PAGE_SIZE		UC64_PAGE_SIZE
-#define PAGE_MASK		__BS(PAGE_SHIFT, 0)
+#define PAGE_MASK		__BM(PAGE_SHIFT, 0)
 
 #ifndef __ASSEMBLY__
 
diff --git a/arch/unicore64/include/asm/pgtable.h b/arch/unicore64/include/asm/pgtable.h
index 7d4e360..6f86bcd 100644
--- a/arch/unicore64/include/asm/pgtable.h
+++ b/arch/unicore64/include/asm/pgtable.h
@@ -16,11 +16,11 @@
 
 #define PGDIR_SHIFT		UC64_PGD_SHIFT
 #define PGDIR_SIZE		UC64_PGD_SIZE
-#define PGDIR_MASK		__BS(PGDIR_SHIFT, 0)
+#define PGDIR_MASK		__BM(PGDIR_SHIFT, 0)
 
 #define PMD_SHIFT		UC64_PMD_SHIFT
 #define PMD_SIZE		UC64_PMD_SIZE
-#define PMD_MASK		__BS(PMD_SHIFT, 0)
+#define PMD_MASK		__BM(PMD_SHIFT, 0)
 
 #define PTRS_PER_PGD		__BP(UC64_PGD_BITS)
 #define PTRS_PER_PMD		__BP(UC64_PMD_BITS)
-- 
1.7.9.5

