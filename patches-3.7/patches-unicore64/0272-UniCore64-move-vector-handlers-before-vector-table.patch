From c097cdb76a52e146dad9265cbfdfa026e6c15c99 Mon Sep 17 00:00:00 2001
From: Guan Xuetao <gxt@mprc.pku.edu.cn>
Date: Sun, 29 Jan 2012 12:54:32 +0800
Subject: [PATCH 272/641] UniCore64: move vector handlers before vector table

Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn>
---
 arch/unicore64/kernel/entry.S |   32 ++++++++++++++++----------------
 1 file changed, 16 insertions(+), 16 deletions(-)

diff --git a/arch/unicore64/kernel/entry.S b/arch/unicore64/kernel/entry.S
index ce715e7..624c356 100644
--- a/arch/unicore64/kernel/entry.S
+++ b/arch/unicore64/kernel/entry.S
@@ -38,22 +38,6 @@ ENTRY(__switch_to)
 	/* FIXME: */
 ENDPROC(__switch_to)
 
-	.p2align	L1_CACHE_SHIFT
-ENTRY(__vectors_table)
-	call	__vec_invalid	/* 0x00: RESET */
-	call	__vec_invalid	/* 0x04: EEXTN */
-	call	__vec_invalid	/* 0x08: ESWI */
-	call	__vec_invalid	/* 0x0c: ITRAP */
-	call	__vec_invalid	/* 0x10: DTRAP */
-	call	__vec_invalid	/* 0x14: FPU_EXC */
-	call	__vec_invalid	/* 0x18: INT_KERNEL */
-	call	__vec_invalid	/* 0x1c: INT_FAULT */
-	call	__vec_invalid	/* 0x20: INT_TIMER */
-	b	__vec_int_puv3	/* 0x24: INT_PE */
-	b	__vec_int_ost	/* 0x28: INT_OST */
-	call	__vec_invalid	/* 0x2c: INT_PM */
-ENDPROC(__vectors_table)
-
 ENTRY(__vec_invalid)
 	dmovl		r0,  0xdeaddeaddeaddead
 	__putdata	r0, r14, r15
@@ -78,3 +62,19 @@ ENTRY(__vec_int_ost)
 	__priv_context_restore
 	eret
 ENDPROC(__vec_int_ost)
+
+	.p2align	L1_CACHE_SHIFT
+ENTRY(__vectors_table)
+	call	__vec_invalid	/* 0x00: RESET */
+	call	__vec_invalid	/* 0x04: EEXTN */
+	call	__vec_invalid	/* 0x08: ESWI */
+	call	__vec_invalid	/* 0x0c: ITRAP */
+	call	__vec_invalid	/* 0x10: DTRAP */
+	call	__vec_invalid	/* 0x14: FPU_EXC */
+	call	__vec_invalid	/* 0x18: INT_KERNEL */
+	call	__vec_invalid	/* 0x1c: INT_FAULT */
+	call	__vec_invalid	/* 0x20: INT_TIMER */
+	b	__vec_int_puv3	/* 0x24: INT_PE */
+	b	__vec_int_ost	/* 0x28: INT_OST */
+	call	__vec_invalid	/* 0x2c: INT_PM */
+ENDPROC(__vectors_table)
-- 
1.7.9.5

