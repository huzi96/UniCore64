From 014f7785ae5bf2527d19230205e26ae73c31d075 Mon Sep 17 00:00:00 2001
From: Guan Xuetao <gxt@mprc.pku.edu.cn>
Date: Wed, 16 May 2012 15:45:03 +0800
Subject: [PATCH 340/641] UniCore64: disable CONFIG_ARCH_PUV3

Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn>
---
 arch/unicore64/Kconfig        |    2 +-
 arch/unicore64/kernel/entry.S |    4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/arch/unicore64/Kconfig b/arch/unicore64/Kconfig
index a836d15e..f819c89 100644
--- a/arch/unicore64/Kconfig
+++ b/arch/unicore64/Kconfig
@@ -57,7 +57,7 @@ config ARCH_FPGA
 	  If unsure, say N.
 
 config ARCH_PUV3
-	def_bool y
+	def_bool n
 
 endmenu
 
diff --git a/arch/unicore64/kernel/entry.S b/arch/unicore64/kernel/entry.S
index 9ddb0d8..7264de4 100644
--- a/arch/unicore64/kernel/entry.S
+++ b/arch/unicore64/kernel/entry.S
@@ -130,9 +130,9 @@ ENDPROC(__vec_dtrap)
 
 ENTRY(__vec_int_puv3)
 	__priv_context_save
-
+#ifdef CONFIG_ARCH_PUV3
 	call	puv3_intc_handler
-
+#endif
 	__priv_context_restore
 	eret
 ENDPROC(__vec_int_puv3)
-- 
1.7.9.5

