From 60a2b42148fd4e3878e794bb4fb1546b14e42409 Mon Sep 17 00:00:00 2001
From: Guan Xuetao <gxt@mprc.pku.edu.cn>
Date: Mon, 4 Jun 2012 11:08:22 +0800
Subject: [PATCH 362/641] UniCore64: change disable_irq to __irq_disable,
 enable_irq to __irq_enable

Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn>
---
 arch/unicore64/include/arch/asm-common.h |    4 ++--
 arch/unicore64/kernel/entry.S            |   10 +++++-----
 2 files changed, 7 insertions(+), 7 deletions(-)

diff --git a/arch/unicore64/include/arch/asm-common.h b/arch/unicore64/include/arch/asm-common.h
index 741fa99..1b1d7d9 100644
--- a/arch/unicore64/include/arch/asm-common.h
+++ b/arch/unicore64/include/arch/asm-common.h
@@ -25,7 +25,7 @@ __ASMMACRO_WRAP(.macro	__halt;
 			halt;
 		.endm)
 
-__ASMMACRO_WRAP(.macro	disable_irq;
+__ASMMACRO_WRAP(.macro	__irq_disable;
 			movc	p0.c12, r16, #0;
 			dmov	r16, asr;
 			dor	r16, r16, #ASR_INTR_SELECT;
@@ -33,7 +33,7 @@ __ASMMACRO_WRAP(.macro	disable_irq;
 			movc	r16, p0.c12, #0;
 		.endm)
 
-__ASMMACRO_WRAP(.macro	enable_irq;
+__ASMMACRO_WRAP(.macro	__irq_enable;
 			movc	p0.c12, r16, #0;
 			dmov	r16, asr;
 			dand	r16, r16, #(~ASR_INTR_SELECT);
diff --git a/arch/unicore64/kernel/entry.S b/arch/unicore64/kernel/entry.S
index 9f0ef07..2166419 100644
--- a/arch/unicore64/kernel/entry.S
+++ b/arch/unicore64/kernel/entry.S
@@ -74,7 +74,7 @@
  */
 ENTRY(ret_from_fork)
 	call		schedule_tail
-1001:	disable_irq
+1001:	__irq_disable
 	__thread_info	r17
 	ldw		r18, [r17+], #THREAD_INFO_FLAGS
 	and		r0, r18, #TIF_NEED_RESCHED
@@ -106,11 +106,11 @@ ENTRY(__vec_itrap)
 	movc		r0, CP0_EPC, #1
 	dmov		r1, sp
 
-	enable_irq
+	__irq_enable
 
 	call		__do_itrap
 
-	disable_irq
+	__irq_disable
 
 	__priv_context_restore
 	eret
@@ -128,11 +128,11 @@ ENTRY(__vec_dtrap)
 	movc		r0, CP0_EPC, #0
 	dmov		r1, sp
 
-	enable_irq
+	__irq_enable
 
 	call		__do_dtrap
 
-	disable_irq
+	__irq_disable
 
 	__priv_context_restore
 	eret
-- 
1.7.9.5

