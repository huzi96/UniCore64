From eb9e273f2104a335070827007a245f95a40bcc67 Mon Sep 17 00:00:00 2001
From: Guan Xuetao <gxt@mprc.pku.edu.cn>
Date: Thu, 14 Jun 2012 10:45:57 +0800
Subject: [PATCH 386/641] UniCore64: Introduce showinfo.c

Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn>
---
 arch/unicore64/kernel/Makefile   |    2 +-
 arch/unicore64/kernel/process.c  |   33 ---------------------------------
 arch/unicore64/kernel/showinfo.c |   37 +++++++++++++++++++++++++++++++++++++
 3 files changed, 38 insertions(+), 34 deletions(-)
 create mode 100644 arch/unicore64/kernel/showinfo.c

diff --git a/arch/unicore64/kernel/Makefile b/arch/unicore64/kernel/Makefile
index 1ae5aeb..533face 100644
--- a/arch/unicore64/kernel/Makefile
+++ b/arch/unicore64/kernel/Makefile
@@ -4,7 +4,7 @@
 obj-y			:= head.o entry.o switch_to.o
 obj-y			+= irq.o
 obj-y			+= process.o ptrace.o
-obj-y			+= setup.o sys.o
+obj-y			+= setup.o showinfo.o sys.o
 obj-y			+= time.o traps.o
 
 obj-$(CONFIG_UNICORE64)		+= cpu-uc64.o
diff --git a/arch/unicore64/kernel/process.c b/arch/unicore64/kernel/process.c
index 4887220..eacc8ac 100644
--- a/arch/unicore64/kernel/process.c
+++ b/arch/unicore64/kernel/process.c
@@ -123,36 +123,3 @@ void cpu_idle(void)
 	/* FIXME */
 	BUG();
 }
-
-/**
- * dump_fpu() -
- * @regs:
- * @fp:
- */
-int dump_fpu(struct pt_regs *regs, elf_fpregset_t *fp)
-{
-	/* FIXME: fill in the fpe structure for a core dump... */
-	BUG();
-	return 0;
-}
-
-/**
- * show_regs() -
- * @regs:
- */
-void show_regs(struct pt_regs *regs)
-{
-	/* FIXME */
-	BUG();
-}
-
-/**
- * show_stack() -
- * @tsk:
- * @sp:
- */
-void show_stack(struct task_struct *tsk, unsigned long *sp)
-{
-	/* FIXME */
-	BUG();
-}
diff --git a/arch/unicore64/kernel/showinfo.c b/arch/unicore64/kernel/showinfo.c
new file mode 100644
index 0000000..6174c33
--- /dev/null
+++ b/arch/unicore64/kernel/showinfo.c
@@ -0,0 +1,37 @@
+#include <linux/kernel.h>
+#include <linux/elfcore.h>
+#include <linux/bug.h>
+#include <linux/sched.h>
+
+/**
+ * dump_fpu() -
+ * @regs:
+ * @fp:
+ */
+int dump_fpu(struct pt_regs *regs, elf_fpregset_t *fp)
+{
+	/* FIXME: fill in the fpe structure for a core dump... */
+	BUG();
+	return 0;
+}
+
+/**
+ * show_regs() -
+ * @regs:
+ */
+void show_regs(struct pt_regs *regs)
+{
+	/* FIXME */
+	BUG();
+}
+
+/**
+ * show_stack() -
+ * @tsk:
+ * @sp:
+ */
+void show_stack(struct task_struct *tsk, unsigned long *sp)
+{
+	/* FIXME */
+	BUG();
+}
-- 
1.7.9.5

