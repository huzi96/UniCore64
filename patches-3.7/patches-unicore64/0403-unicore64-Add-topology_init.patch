From 56f0b70d8eac98933594fc09202b781de68f5eb4 Mon Sep 17 00:00:00 2001
From: Guan Xuetao <gxt@mprc.pku.edu.cn>
Date: Sun, 26 Aug 2012 17:19:46 +0800
Subject: [PATCH 403/641] unicore64: Add topology_init

Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn>
---
 arch/unicore64/kernel/cpu-uc64.c |   14 ++++++++++++++
 1 file changed, 14 insertions(+)

diff --git a/arch/unicore64/kernel/cpu-uc64.c b/arch/unicore64/kernel/cpu-uc64.c
index cb5e335..70809cd 100644
--- a/arch/unicore64/kernel/cpu-uc64.c
+++ b/arch/unicore64/kernel/cpu-uc64.c
@@ -1,5 +1,19 @@
 #include <linux/kernel.h>
 #include <linux/seq_file.h>
+#include <linux/cpu.h>
+
+static struct cpu cpuinfo_unicore64;
+
+static int __init topology_init(void)
+{
+	int i;
+
+	for_each_possible_cpu(i)
+		register_cpu(&cpuinfo_unicore64, i);
+
+	return 0;
+}
+subsys_initcall(topology_init);
 
 /**
  * cpu_uc64_show() - show the UniCore64 cpu information
-- 
1.7.9.5

