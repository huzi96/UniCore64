From c94ee67d5b7f427afe504eec93c4972e7081b143 Mon Sep 17 00:00:00 2001
From: Liu Guoli <liuguoli@mprc.pku.edu.cn>
Date: Thu, 30 Aug 2012 16:31:23 +0800
Subject: [PATCH 413/641] UniCore64: Fix bug: fsnotify_notification returned
 with diabled interrupts

Signed-off-by: Liu Guoli <liuguoli@mprc.pku.edu.cn>
---
 arch/unicore64/include/arch/hwdef-cpu.h |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/unicore64/include/arch/hwdef-cpu.h b/arch/unicore64/include/arch/hwdef-cpu.h
index 8ac0a62..8d66fd3 100644
--- a/arch/unicore64/include/arch/hwdef-cpu.h
+++ b/arch/unicore64/include/arch/hwdef-cpu.h
@@ -73,14 +73,14 @@
 #define __read_uc64(reg)					\
 	({							\
 		unsigned long __val;				\
-		__asm__("dmov	%0, " __stringify(reg)		\
+		__asm__ __volatile__("dmov	%0, " __stringify(reg)	\
 		    : "=r" (__val));				\
 		__val;						\
 	})
 
 #define __write_uc64(reg_value, reg)				\
 	({							\
-		__asm__("dmov	" __stringify(reg) ", %0"	\
+		__asm__ __volatile__("dmov	" __stringify(reg) ", %0"\
 		    : : "r" (reg_value));			\
 	})
 
-- 
1.7.9.5

