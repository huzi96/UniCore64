From 8b4fa85f2cf50babcdf2182d9234569edc3a1377 Mon Sep 17 00:00:00 2001
From: Chang Huaixin <changhuaixin@mprc.pku.edu.cn>
Date: Thu, 11 Oct 2012 21:41:51 +0800
Subject: [PATCH 429/641] UniCore64: Add CONFIG_SMP

Signed-off-by: Chang Huaixin <changhuaixin@mprc.pku.edu.cn>
---
 arch/unicore64/Kconfig                     |   23 +++++++++++++++++++++++
 arch/unicore64/configs/unicore64_defconfig |    1 +
 2 files changed, 24 insertions(+)

diff --git a/arch/unicore64/Kconfig b/arch/unicore64/Kconfig
index f819c89..2145edf 100644
--- a/arch/unicore64/Kconfig
+++ b/arch/unicore64/Kconfig
@@ -40,6 +40,29 @@ source "init/Kconfig"
 
 menu "Processor and System Type"
 
+config SMP
+	bool "Symmeric Multi-Processing"
+	help
+	  This enables support for systems with more than one CPU. If you have
+	  a system with only one CPU, like most personal computers, say N. If
+	  you have a system with more than one CPU, say Y.
+
+	  If you say N here, the kernel will run on single and multiprocessor
+	  machines, but will use only one CPU of a multiprocessor machine. If
+	  you say Y here, the kernel will run on many, but not all, single
+	  processor machines. On a single processor machine, the kernel will
+	  run faster if you say N here.
+
+	  See also the SMP-HOWTO available at
+	  <http://tldp.org/HOWTO/SMP-HOWTO.html>.
+
+	  If you don't know what to do here, say N.
+
+config NR_CPUS
+	int "Maximum number of CPUs (2-4)"
+	depends on SMP
+	default "2"
+
 config MMU
 	def_bool y
 
diff --git a/arch/unicore64/configs/unicore64_defconfig b/arch/unicore64/configs/unicore64_defconfig
index ba491b2..d93f02a 100644
--- a/arch/unicore64/configs/unicore64_defconfig
+++ b/arch/unicore64/configs/unicore64_defconfig
@@ -5,6 +5,7 @@ CONFIG_BLK_DEV_INITRD=y
 CONFIG_INITRAMFS_SOURCE="/pub/initramfs/initramfs_config_64"
 
 ### Processor and System Type
+CONFIG_SMP=n
 #	Processor Features
 CONFIG_ARCH_FPGA=y
 CONFIG_CPU_ICACHE_DISABLE=y
-- 
1.7.9.5

