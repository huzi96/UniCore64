From 7b1fc6fc376605e37f3d1b6c68278eb3a31adcfc Mon Sep 17 00:00:00 2001
From: Guan Xuetao <gxt@mprc.pku.edu.cn>
Date: Fri, 2 Nov 2012 17:21:39 +0800
Subject: [PATCH 465/641] unicore64: Switch to generic sys_execve()

Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn>
---
 arch/unicore64/include/asm/unistd.h |    1 +
 arch/unicore64/kernel/sys.c         |    8 --------
 2 files changed, 1 insertion(+), 8 deletions(-)

diff --git a/arch/unicore64/include/asm/unistd.h b/arch/unicore64/include/asm/unistd.h
index ad33b41..e7cb2af 100644
--- a/arch/unicore64/include/asm/unistd.h
+++ b/arch/unicore64/include/asm/unistd.h
@@ -3,6 +3,7 @@
 
 #define __ARCH_WANT_SYNC_FILE_RANGE2
 #define __ARCH_WANT_SYSCALL_NO_AT
+#define __ARCH_WANT_SYS_EXECVE
 
 /* Use the standard ABI for syscalls. */
 #include <asm-generic/unistd.h>
diff --git a/arch/unicore64/kernel/sys.c b/arch/unicore64/kernel/sys.c
index 322d7bb..1c05cf44 100644
--- a/arch/unicore64/kernel/sys.c
+++ b/arch/unicore64/kernel/sys.c
@@ -9,14 +9,6 @@ SYSCALL_DEFINE5(clone, unsigned long, clone_flags, unsigned long, newsp,
 	BUG();
 }
 
-SYSCALL_DEFINE4(execve, const char __user *, filename,
-		const char __user *const __user *, argv,
-		const char __user *const __user *, envp,
-		struct pt_regs *, regs)
-{
-	BUG();
-}
-
 SYSCALL_DEFINE6(mmap, unsigned long, addr, unsigned long, len,
 		unsigned long, prot, unsigned long, flags,
 		unsigned long, fd, off_t, offset)
-- 
1.7.9.5

