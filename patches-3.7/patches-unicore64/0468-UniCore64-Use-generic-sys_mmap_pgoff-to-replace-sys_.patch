From 69e605040224d103d584be767af3fcc30bce220c Mon Sep 17 00:00:00 2001
From: Liang Rongrong <liangrongrong@mprc.pku.edu.cn>
Date: Mon, 19 Nov 2012 14:48:41 +0800
Subject: [PATCH 468/641] UniCore64: Use generic sys_mmap_pgoff to replace
 sys_mmap

Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn>
---
 arch/unicore64/include/asm/unistd.h |    2 ++
 arch/unicore64/kernel/sys.c         |    7 -------
 2 files changed, 2 insertions(+), 7 deletions(-)

diff --git a/arch/unicore64/include/asm/unistd.h b/arch/unicore64/include/asm/unistd.h
index e7cb2af..d6005d1 100644
--- a/arch/unicore64/include/asm/unistd.h
+++ b/arch/unicore64/include/asm/unistd.h
@@ -5,6 +5,8 @@
 #define __ARCH_WANT_SYSCALL_NO_AT
 #define __ARCH_WANT_SYS_EXECVE
 
+#define sys_mmap		sys_mmap_pgoff
+
 /* Use the standard ABI for syscalls. */
 #include <asm-generic/unistd.h>
 
diff --git a/arch/unicore64/kernel/sys.c b/arch/unicore64/kernel/sys.c
index 1c05cf44..39dc829 100644
--- a/arch/unicore64/kernel/sys.c
+++ b/arch/unicore64/kernel/sys.c
@@ -9,13 +9,6 @@ SYSCALL_DEFINE5(clone, unsigned long, clone_flags, unsigned long, newsp,
 	BUG();
 }
 
-SYSCALL_DEFINE6(mmap, unsigned long, addr, unsigned long, len,
-		unsigned long, prot, unsigned long, flags,
-		unsigned long, fd, off_t, offset)
-{
-	BUG();
-}
-
 #undef __SYSCALL
 #define __SYSCALL(nr, call) [nr] = (call),
 
-- 
1.7.9.5

