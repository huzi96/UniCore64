From 45db6ead5744cd74fe32596d5f7dd979f20d3176 Mon Sep 17 00:00:00 2001
From: Chang Huaixin <changhuaixin@mprc.pku.edu.cn>
Date: Tue, 18 Dec 2012 16:25:24 +0800
Subject: [PATCH 503/641] unicore64: Use bsl instead of bfs

Signed-off-by: Chang Huaixin <changhuaixin@mprc.pku.edu.cn>
---
 arch/unicore64/include/asm/spinlock.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/arch/unicore64/include/asm/spinlock.h b/arch/unicore64/include/asm/spinlock.h
index 62dcd8b..a600267 100644
--- a/arch/unicore64/include/asm/spinlock.h
+++ b/arch/unicore64/include/asm/spinlock.h
@@ -77,7 +77,7 @@ static inline void arch_read_lock(arch_rwlock_t *rw)
 	__asm__ __volatile__(
 		"1:	llw		%0, [%1+], #0\n"
 		"	cmpsub.a	%0, #0\n"
-		"	bfs		1b\n"
+		"	bsl		1b\n"
 		"	add		%0, %0, #1\n"
 		"	scw		%0, [%1+], #0\n"
 		"	cmpsub.a	%0, #0\n"
-- 
1.7.9.5

