From a72b0a8a7f7ab855395772f256b1c5bb11ebe5c3 Mon Sep 17 00:00:00 2001
From: Chang Huaixin <changhuaixin@mprc.pku.edu.cn>
Date: Fri, 28 Dec 2012 15:28:06 +0800
Subject: [PATCH 534/641] unicore64: Use unicore64 cmpxchg and xchg

Signed-off-by: Chang Huaixin <changhuaixin@mprc.pku.edu.cn>
---
 arch/unicore64/include/asm/cmpxchg.h |    5 -----
 1 file changed, 5 deletions(-)

diff --git a/arch/unicore64/include/asm/cmpxchg.h b/arch/unicore64/include/asm/cmpxchg.h
index 2077e9f..7683f2b 100644
--- a/arch/unicore64/include/asm/cmpxchg.h
+++ b/arch/unicore64/include/asm/cmpxchg.h
@@ -1,9 +1,6 @@
 #ifndef __UNICORE64_ASM_CMPXCHG_H__
 #define __UNICORE64_ASM_CMPXCHG_H__
 
-#ifndef CONFIG_SMP
-#include <asm-generic/cmpxchg.h>
-#else
 #include <asm/barrier.h>
 
 #include <arch/asm-debug.h>
@@ -97,6 +94,4 @@ static inline unsigned long __xchg(unsigned long x, volatile void *ptr,
 #define xchg(ptr, x) \
 	((__typeof__(*(ptr)))__xchg((unsigned long)(x), (ptr), sizeof(*(ptr))))
 
-#endif /* CONFIG_SMP */
-
 #endif /* __UNICORE64_ASM_CMPXCHG_H__ */
-- 
1.7.9.5

