From b25153687a120136c38086e02fb309c02685a6f0 Mon Sep 17 00:00:00 2001
From: Liang Rongrong <liangrongrong@mprc.pku.edu.cn>
Date: Mon, 10 Mar 2014 16:48:44 +0800
Subject: [PATCH 582/641] unicore64: Add UC64_PTE_SHARE bit

Signed-off-by: Chang Huaixin <changhuaixin@mprc.pku.edu.cn>
---
 arch/unicore64/include/asm/pgtable-prot.h |    7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

diff --git a/arch/unicore64/include/asm/pgtable-prot.h b/arch/unicore64/include/asm/pgtable-prot.h
index 8672ddf..c70b4bd 100644
--- a/arch/unicore64/include/asm/pgtable-prot.h
+++ b/arch/unicore64/include/asm/pgtable-prot.h
@@ -6,11 +6,12 @@
 #include <arch/hwdef-pgtable.h>
 
 #define PAGE_KERNEL	__pgprot(UC64_PTE_RWX | UC64_PTE_DIRTY		\
-		| UC64_PTE_EXIST | UC64_PTE_YOUNG | UC64_PTE_TYPE_CACHE)
+		| UC64_PTE_EXIST | UC64_PTE_YOUNG | UC64_PTE_TYPE_CACHE \
+		| UC64_PTE_SHARE)
 
 /* FIXME: if READ is needed when WRITE or EXEC, otherwise, modify VM_flags */
-#define arch_vm_get_page_prot(vm_flags)			\
-		__pgprot(UC64_PTE_EXIST | UC64_PTE_TYPE_CACHE | UC64_PTE_USER)
+#define arch_vm_get_page_prot(vm_flags) __pgprot(UC64_PTE_EXIST \
+		| UC64_PTE_TYPE_CACHE | UC64_PTE_USER | UC64_PTE_SHARE)
 
 #define __P000		__pgprot(0)
 #define __P001		__pgprot(UC64_PTE_READ)
-- 
1.7.9.5

